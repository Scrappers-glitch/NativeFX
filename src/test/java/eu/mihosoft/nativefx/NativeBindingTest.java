/*
 * This Java source file was generated by the Gradle 'init' task.
 */
package eu.mihosoft.nativefx;

import org.junit.Test;
import static org.junit.Assert.*;

/**
 * The tests do currently only verify that the JNI based native binding works.
 * This is to ensure that no {@link UnsatisfiedLinkError} and similar exceptions
 * are thrown.
 * 
 * <p><b>Note:</b></p> we still need to ensure that the behavior for events
 * and buffer synchronization among multiple processes is consistent on all
 * supported platforms. So far, there's no formal description for expected
 * behavior. 
 */
public class NativeBindingTest {
    @Test public void testNativeMethodsSendMsg() {
        NativeBinding.init();

        int key = NativeBinding.connectTo("_mem");
        String response = NativeBinding.sendMsg(key, "abcde");

        System.out.println("Response: " + response);

        // assertTrue("sendMsg should return 'hello from native'", "hello from native!".equals(response));
    }

    @Test public void testNativeMethodsConnectTo() {
        NativeBinding.init();
        // TODO implement
        // int key = NativeBinding.connectTo("_mem");
        // assertTrue("connectTo should return 0", 0==key);
    }

    @Test public void testNativeMethodsNextKey() {
        NativeBinding.init();
        int key = NativeBinding.nextKey();
        assertTrue("nextKey should return 0", 0==key);
    }
}
